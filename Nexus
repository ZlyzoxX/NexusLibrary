-- Modern Exploit UI Library - "NexusUI" (2025 Style)
local NexusUI = {}
local Services = {
    UIS = game:GetService("UserInputService"),
    RS = game:GetService("RunService"),
    TS = game:GetService("TweenService")
}

local DrawingObjects = {}
local function New(class, props)
    local obj = Drawing.new(class)
    for k, v in pairs(props or {}) do obj[k] = v end
    table.insert(DrawingObjects, obj)
    return obj
end

-- Config System (simple)
local Config = { Saves = {} }
local function SaveConfig(name) -- Placeholder, use syn.saveinstance or http for real
    Config.Saves[name] = Config.Saves[name] or {}
    -- Implement saving toggles/sliders here
end

function NexusUI:Create(options)
    options = options or {}
    local Window = {
        Name = options.Name or "Nexus UI",
        Size = options.Size or Vector2.new(500, 600),
        Position = options.Position or Vector2.new(200, 200),
        Tabs = {},
        CurrentTab = nil
    }

    -- Main Container
    local Main = New("Square", {Filled = true, Color = Color3.fromRGB(25, 25, 35), Size = Window.Size, Position = Window.Position, Transparency = 0.95})
    local Outline = New("Square", {Filled = false, Color = Color3.fromRGB(60, 60, 80), Size = Window.Size + Vector2.new(2,2), Position = Window.Position - Vector2.new(1,1), Thickness = 2})

    -- Title Bar
    local TitleBar = New("Square", {Filled = true, Color = Color3.fromRGB(20, 20, 30), Size = Vector2.new(Window.Size.X, 40), Position = Window.Position})
    local TitleText = New("Text", {Text = Window.Name, Size = 20, Position = Window.Position + Vector2.new(15, 10), Color = Color3.fromRGB(230, 230, 255), Outline = true, Font = 2})

    -- Dragging Logic
    local Dragging = false
    local DragOffset
    TitleBar.MouseButton1Down:Connect(function()
        Dragging = true
        DragOffset = Services.UIS:GetMouseLocation() - Window.Position
    end)
    Services.UIS.InputEnded:Connect(function(inp) if inp.UserInputType == Enum.UserInputType.MouseButton1 then Dragging = false end end)
    Services.RS.RenderStepped:Connect(function()
        if Dragging then
            Window.Position = Services.UIS:GetMouseLocation() - DragOffset
            Main.Position = Window.Position
            Outline.Position = Window.Position - Vector2.new(1,1)
            TitleBar.Position = Window.Position
            TitleText.Position = Window.Position + Vector2.new(15, 10)
            -- Update all elements (implement per-element update in creation)
        end
    end)

    -- Tab System
    function Window:NewTab(name)
        local TabBtn = New("Square", {Filled = true, Color = Color3.fromRGB(35, 35, 50), Size = Vector2.new(120, 35), Position = Window.Position + Vector2.new(10 + #Window.Tabs * 130, 45)})
        local TabText = New("Text", {Text = name, Size = 16, Center = true, Position = TabBtn.Position + Vector2.new(60, 8), Color = Color3.fromRGB(180, 180, 200)})

        local Tab = {Elements = {}, Content = {}}
        table.insert(Window.Tabs, Tab)

        TabBtn.MouseButton1Click:Connect(function()
            Window.CurrentTab = Tab
            -- Hide other tab contents, show this (implement visibility toggle)
        end)

        -- Add Toggle
        function Tab:Toggle(opts)
            local y = 80 + #Tab.Elements * 50
            local state = opts.Default or false
            local toggle = New("Square", {Filled = true, Color = state and Color3.fromRGB(80, 180, 255) or Color3.fromRGB(60, 60, 70), Size = Vector2.new(40, 20), Position = Window.Position + Vector2.new(Window.Size.X - 60, y)})
            local label = New("Text", {Text = opts.Name, Position = Window.Position + Vector2.new(20, y-5), Color = Color3.fromRGB(220, 220, 220), Size = 15})

            toggle.MouseButton1Click:Connect(function()
                state = not state
                toggle.Color = state and Color3.fromRGB(80, 180, 255) or Color3.fromRGB(60, 60, 70)
                if opts.Callback then opts.Callback(state) end
            end)
        end

        -- Add Slider (basic)
        function Tab:Slider(opts)
            -- Implement slider with line + circle draggable
        end

        -- Add Button
        function Tab:Button(opts)
            local y = 80 + #Tab.Elements * 50
            local btn = New("Square", {Filled = true, Color = Color3.fromRGB(50, 120, 200), Size = Vector2.new(Window.Size.X - 40, 35), Position = Window.Position + Vector2.new(20, y)})
            local btnText = New("Text", {Text = opts.Name, Center = true, Position = btn.Position + Vector2.new((Window.Size.X - 40)/2, 8), Color = Color3.white, Size = 16})

            btn.MouseEnter:Connect(function() btn.Color = Color3.fromRGB(70, 140, 220) end)
            btn.MouseLeave:Connect(function() btn.Color = Color3.fromRGB(50, 120, 200) end)
            btn.MouseButton1Click:Connect(opts.Callback or function() end)
        end

        return Tab
    end

    return Window
end

-- Usage:
-- local ui = NexusUI:Create({Name = "Nexus Hub"})
-- local tab = ui:NewTab("Main")
-- tab:Toggle({Name = "Aimbot", Default = false, Callback = function(v) print(v) end})
-- tab:Button({Name = "Kill All", Callback = function() -- exploit code end})

return NexusUI
